<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./bootstrap.min.css">
    <style>
        .panel-footer a{
            margin-left : 15px;
        } 
        .del{
            text-decoration: line-through; /* çº¿ç©¿è¿‡æ–‡å­—ï¼Œæœ‰ä¸€ç§æ–‡å­—åˆ é™¤çš„æ•ˆæœ */
            color : #ccc;
        }
    </style>
</head>
<body>
<div id="app">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="panel success">
                    <div class="panel-headingbg-warning">
                        <h2>ğŸ˜™{{undone}}</h2>
                        <input type="text" class="form-control" v-model="title" @keydown.enter="add" v-focus>
                    </div>
                    <div class="panel-body">
                        <ul class="list-group">
                            <li class="list-group-item" v-for="(item , index) in filterTodo" :key="index">
                                <span>
                                    <input type="checkbox" v-model="item.isSelected">
                                    <span :class="{del: item.isSelected}">{{item.title}}</span>
                                    <!-- <del>{{item.title}}</del> æ¨ªçº¿æ»‘è¿‡æ–‡å­—-->
                                </span>
                                <button class="btn btn-danger btn-xs pull-right" @click = "remove(index)">åˆ é™¤</button>

                            </li>
                        </ul>
                    </div>
                    <div class="panel-footer">
                        <a v-for="(item,index) in config" :key = "index" :href="item.hash">{{item.name}}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<script src="./js/vue.js"></script>
<script>

let config = [
    {
        name : 'å…¨éƒ¨',
        hash : '#all'
    },
    {
        name : 'å·²å®Œæˆ',
        hash : '#finished'
    },
    {
        name : 'æœªå®Œæˆ',
        hash : '#unfinished'
    }
]
let vm = new Vue({
    el : '#app',
    data : {
        title:'',
        todoList:[
            {
                isSelected : false,
                title : 'åƒé¥­'
            },
            {
                isSelected:false,
                title : 'ç¡è§‰'
            },
            {
                isSelected:false,
                title : 'æ‰“è±†è±†'
            }
        ],
        config : config,
        hash : '#all'
    },
    created () {
       window.addEventListener('hashchange',()=>{
           this.hash = location.hash;
       });   
    },
    methods:{
        add(){
            // æ·»åŠ ä»»åŠ¡ 
            console.log(this.title);
            this.todoList.push({
                title: this.title,
                isSelected:false
            });
            this.title = ''; // æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨åæ¸…ç©º
        },
        remove(index){
            this.todoList.splice(index,1);
        }
    },
    directives: {
      focus : {
          inserted(el){
              el.focus();
          }
      }  
    },
    computed: {
        undone(){
           
            let num =  this.todoList.filter(item => !item.isSelected).length;
            let msg = '';
            if(num){
                msg = `ä½ è¿˜æœ‰${num}äº‹æ²¡åš`
            }else{
                msg = `ä»Šå¤©çš„äº‹æƒ…åšå®Œäº†`;
            }
            return msg;
        },
        filterTodo(){
            // console.log(this.hash);

            if(this.hash === '#all') {
                return this.todoList;
            };
            // æ ¹æ®å½“å‰hashçš„å€¼è¿‡æ»¤
            switch(this.hash){
                case '#all' :
                    return this.todoList;
                case '#finished':
                    return this.todoList.filter(item => item.isSelected);
                case '#unfinished' :
                    return this.todoList.filter(item => !this.isSelected);
            }
            // return this.todoList.filter()
        }
    }
});

</script>
</body>
</html>